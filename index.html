<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gloEx Project Hub - Innovation Showcase</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, collection, query, onSnapshot, addDoc, serverTimestamp, setLogLevel, orderBy } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // --- Global Firebase and Application Variables ---
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        
        setLogLevel('error'); // Set log level
        
        let app = null;
        let db = null;
        let auth = null;
        let userId = null;

        // --- Application State Management (as per original file structure) ---
        window.currentState = {
            view: 'dashboard', // 'dashboard', 'project-details', 'upload'
            selectedProjectId: null,
            projects: [],
            isAuthReady: false,
            searchText: ''
        };
        
        // --- Firebase Initialization and Authentication ---
        const initFirebase = async () => {
            if (!firebaseConfig) {
                console.error("Firebase config is missing. Data persistence will be unavailable.");
                window.currentState.isAuthReady = true;
                return;
            }
            try {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }

                onAuthStateChanged(auth, (user) => {
                    userId = user?.uid || crypto.randomUUID();
                    window.currentState.isAuthReady = true;
                    console.log("Firebase Auth Ready. User ID:", userId);
                    startProjectListener(); // Start listening for data once authenticated
                });

            } catch (error) {
                console.error("Firebase initialization failed:", error);
                window.currentState.isAuthReady = true;
            }
        };

        // --- Firestore Data Management ---
        const getProjectsCollectionRef = () => {
            // Using public data storage for a project showcase (shared data)
            return collection(db, `artifacts/${appId}/public/data/projects`);
        };

        const startProjectListener = () => {
             if (!db) { return; }

             // Set up a query. Firestore doesn't support easy sorting without indexes, 
             // so we'll fetch all and sort by timestamp/title in JS.
             const q = query(getProjectsCollectionRef());

             onSnapshot(q, (snapshot) => {
                const projects = [];
                snapshot.forEach((doc) => {
                    projects.push({ id: doc.id, ...doc.data() });
                });
                // Sort by creation time (descending) in memory
                projects.sort((a, b) => (b.createdAt?.seconds || 0) - (a.createdAt?.seconds || 0));
                window.currentState.projects = projects;
                window.renderApp(); // Re-render the app on data change
             }, (error) => {
                 console.error("Error listening to projects:", error);
             });
        };

        window.submitNewProject = async (projectData) => {
            if (!db) { 
                console.error("Database not initialized.");
                alert("Submission failed: Database not ready."); 
                return; 
            }
            try {
                // Add userId to the project data for attribution
                const newProject = {
                    ...projectData,
                    authorId: userId,
                    createdAt: serverTimestamp()
                };
                await addDoc(getProjectsCollectionRef(), newProject);
                window.currentState.view = 'dashboard';
                window.renderApp();
                // Instead of alert, use a custom message box
                document.getElementById('messageBox').innerHTML = '<div class="bg-emerald-100 border border-emerald-400 text-emerald-700 px-4 py-3 rounded relative" role="alert"><strong class="font-bold">Success!</strong><span class="block sm:inline"> Your project has been submitted.</span></div>';
                setTimeout(() => document.getElementById('messageBox').innerHTML = '', 3000);

            } catch (e) {
                console.error("Error adding document: ", e);
                 document.getElementById('messageBox').innerHTML = '<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><strong class="font-bold">Error!</strong><span class="block sm:inline"> Submission failed. Check console for details.</span></div>';
            }
        };
        
        // Initialize everything on load
        initFirebase();
    </script>
    <style>
        /* General Styles for Inter Font and smooth transitions */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Light background for contrast */
        }
        
        /* Utility for line clamping */
        .line-clamp-3 {
            overflow: hidden;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 3;
        }

        /* Modern Green Button Style */
        .green-button {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }

        .green-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
        }

        /* Animated Picture Placeholder - CSS Wave Animation */
        .wave-container {
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 1rem;
        }

        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, rgba(236, 254, 255, 0.5) 0%, rgba(199, 210, 254, 0.5) 100%);
            border-radius: 1rem;
        }

        .wave:nth-child(1) {
            background-color: rgba(6, 182, 212, 0.2); /* Cyan */
            animation: wave-motion 8s cubic-bezier(0.4, 0, 0.2, 1) infinite alternate;
        }
        .wave:nth-child(2) {
            background-color: rgba(244, 114, 182, 0.2); /* Rose */
            animation: wave-motion 10s cubic-bezier(0.4, 0, 0.2, 1) infinite alternate reverse;
        }

        @keyframes wave-motion {
            0% {
                transform: translate(0, 0) rotate(0deg) scale(1, 1);
            }
            100% {
                transform: translate(5%, 10%) rotate(5deg) scale(1.1, 1.2);
            }
        }

        /* Custom Scrollbar for better UX */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-thumb {
            background-color: #047857; /* Dark Green */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-track {
            background-color: #e5e7eb; /* Light Gray */
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Message Box Placeholder -->
    <div id="messageBox" class="fixed top-4 right-4 z-50"></div>

    <!-- HEADER (Green) -->
    <header class="bg-emerald-700 shadow-xl p-4 sticky top-0 z-20">
        <div class="container mx-auto flex flex-wrap justify-between items-center gap-4">
            <!-- Logo (Well Positioned) -->
            <h1 class="text-3xl font-extrabold text-white tracking-wider animate-pulse">
                <a href="#" onclick="window.currentState.view='dashboard'; window.renderApp(); return false;" id="appTitle" class="transition duration-300 hover:text-emerald-200">
                    <span class="text-emerald-300">G</span>loEx <span class="text-emerald-300">H</span>ub
                </a>
            </h1>
            
            <!-- Search Bar (Well Positioned) -->
            <div class="flex-grow max-w-xl">
                <div class="relative">
                    <input 
                        type="search" 
                        placeholder="Search projects, authors, or tags..." 
                        id="searchInput"
                        oninput="window.currentState.searchText = this.value; window.renderApp();"
                        class="w-full py-2 pl-10 pr-4 rounded-full border-2 border-emerald-400 focus:outline-none focus:border-white text-gray-800 bg-white shadow-inner transition duration-300"
                    >
                    <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                </div>
            </div>

            <!-- Navigation Buttons (Green) -->
            <nav class="flex space-x-3">
                <button 
                    onclick="window.currentState.view='upload'; window.renderApp();" 
                    class="green-button bg-emerald-500 text-white font-semibold py-2 px-4 rounded-full hover:bg-emerald-600 focus:outline-none focus:ring-4 focus:ring-emerald-300 transition duration-300 shadow-lg whitespace-nowrap text-sm md:text-base">
                    Upload Project
                </button>
                <a href="https://www.gloex.org" target="_blank" class="green-button bg-transparent border-2 border-white text-white font-semibold py-2 px-4 rounded-full hover:bg-white hover:text-emerald-700 focus:outline-none focus:ring-4 focus:ring-emerald-300 transition duration-300 shadow-lg text-sm md:text-base">
                    Main Site
                </a>
            </nav>
        </div>
    </header>

    <!-- MAIN CONTENT CONTAINER -->
    <main id="appContainer" class="flex-grow"></main>

    <!-- FOOTER (Green) -->
    <footer class="bg-emerald-800 text-white p-8 mt-auto shadow-inner">
        <div class="container mx-auto grid grid-cols-1 md:grid-cols-4 gap-8">
            
            <!-- Section 1: Contact Info -->
            <div class="contact-info">
                <h3 class="text-2xl font-bold mb-3 text-emerald-200">Ready to Start?</h3>
                <p class="text-sm mb-4">Contact the ELIJUL GROUPS LTD team today for professional solutions.</p>
                <p class="mb-1">
                    <span class="font-semibold text-emerald-300">Email (Web/Software):</span> 
                    <a href="mailto:infogloex@proton.me" class="text-emerald-100 hover:text-white transition duration-200">infogloex@proton.me</a>
                </p>
                <p class="mb-1">
                    <span class="font-semibold text-emerald-300">Email (Partnership):</span> 
                    <a href="mailto:info@gloex.org" class="text-emerald-100 hover:text-white transition duration-200">info@gloex.org</a>
                </p>
                <p class="mb-1">
                    <span class="font-semibold text-emerald-300">Phone/WhatsApp:</span> +250 788 660 513
                </p>
                <p class="mt-4 text-sm opacity-80">
                    Address: Kigali, Rwanda
                </p>
            </div>

            <!-- Section 2: Quick Links (Green) -->
            <div>
                <h3 class="text-xl font-bold mb-3 text-emerald-200">Quick Links</h3>
                <ul class="space-y-2 text-sm">
                    <li><a href="#" onclick="window.currentState.view='dashboard'; window.renderApp(); return false;" class="text-emerald-100 hover:text-white transition duration-200">Project Dashboard</a></li>
                    <li><a href="https://www.gloex.org" target="_blank" class="text-emerald-100 hover:text-white transition duration-200">Official Website</a></li>
                    <li><a href="#" class="text-emerald-100 hover:text-white transition duration-200">Services</a></li>
                    <li><a href="#" class="text-emerald-100 hover:text-white transition duration-200">Privacy Policy</a></li>
                </ul>
            </div>

            <!-- Section 3: Popular Tags -->
            <div>
                <h3 class="text-xl font-bold mb-3 text-emerald-200">Popular Categories</h3>
                <div class="flex flex-wrap gap-2 text-xs">
                    <span class="bg-emerald-600 text-white px-2 py-1 rounded-full cursor-pointer hover:bg-emerald-500 transition duration-200">WebDev</span>
                    <span class="bg-emerald-600 text-white px-2 py-1 rounded-full cursor-pointer hover:bg-emerald-500 transition duration-200">AI/ML</span>
                    <span class="bg-emerald-600 text-white px-2 py-1 rounded-full cursor-pointer hover:bg-emerald-500 transition duration-200">Mobile</span>
                    <span class="bg-emerald-600 text-white px-2 py-1 rounded-full cursor-pointer hover:bg-emerald-500 transition duration-200">DataViz</span>
                    <span class="bg-emerald-600 text-white px-2 py-1 rounded-full cursor-pointer hover:bg-emerald-500 transition duration-200">OpenSource</span>
                </div>
            </div>

            <!-- Section 4: Call to Action (Green) -->
             <div class="text-center md:text-left">
                <h3 class="text-xl font-bold mb-3 text-emerald-200">Join the Community</h3>
                <p class="mb-4 text-sm">Share your innovation and get feedback from global developers.</p>
                <button 
                    onclick="window.currentState.view='upload'; window.renderApp();" 
                    class="green-button bg-emerald-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-emerald-600 focus:outline-none focus:ring-4 focus:ring-emerald-300 w-full md:w-auto">
                    START SHARING NOW
                </button>
            </div>
        </div>

        <!-- Copyright -->
        <div class="mt-8 pt-4 border-t border-emerald-700 text-center text-sm opacity-75">
            <p> &copy; 2025 ELIJUL GROUPS LTD. TWUBAKA-UBUMENYI. All rights reserved.</p>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // Placeholder Project Data (Will be replaced by Firebase data)
        const mockProjects = [
            { id: 'p1', title: 'AI-Powered Stock Predictor', description: 'A Python-based machine learning model using LSTM networks to forecast stock market trends. 95% accuracy on historical data.', image: 'https://placehold.co/400x250/06b6d4/ffffff?text=AI+Model', tags: ['AI', 'Python', 'Finance'], author: 'Jane Doe', views: 1200, demoUrl: 'https://github.com/' },
            { id: 'p2', title: 'Modern React E-commerce UI', description: 'A sleek, responsive e-commerce front-end built with React and Tailwind CSS, focusing on mobile-first design and accessibility.', image: 'https://placehold.co/400x250/f472b6/ffffff?text=React+UI', tags: ['React', 'WebDev', 'Frontend'], author: 'John Smith', views: 850, demoUrl: 'https://github.com/' },
            { id: 'p3', title: 'Open Source IoT Dashboard', description: 'Real-time data visualization dashboard for home automation sensors using Node.js and D3.js. Easily extendable architecture.', image: 'https://placehold.co/400x250/4ade80/000000?text=IoT+Dashboard', tags: ['IoT', 'Node.js', 'DataViz'], author: 'Alice Brown', views: 420, demoUrl: 'https://github.com/' },
            { id: 'p4', title: 'Game Engine in C++', description: 'A lightweight 2D game engine written from scratch in C++ with OpenGL rendering. Includes collision detection and basic physics.', image: 'https://placehold.co/400x250/fb7185/ffffff?text=C%2B%2B+Game', tags: ['C++', 'Gaming', 'Engine'], author: 'Bob Green', views: 2100, demoUrl: 'https://github.com/' },
        ];
        
        // Initial state load
        if (window.currentState.projects.length === 0) {
            window.currentState.projects = mockProjects;
        }

        const appContainer = document.getElementById('appContainer');

        // --- View Rendering Functions ---

        // 1. Dashboard View (Landing page, Hero, CTA, Project Grid)
        const renderDashboard = () => {
            const { projects, searchText } = window.currentState;

            const filteredProjects = projects.filter(p => 
                p.title.toLowerCase().includes(searchText.toLowerCase()) || 
                p.description.toLowerCase().includes(searchText.toLowerCase()) ||
                p.tags.some(tag => tag.toLowerCase().includes(searchText.toLowerCase())) ||
                p.author.toLowerCase().includes(searchText.toLowerCase())
            );

            // Function to generate a single project card
            const generateProjectCard = (project) => {
                // Alternating card colors (Blue and Pink) for modern look
                const isBlue = project.id.charCodeAt(project.id.length - 1) % 2 === 0;
                const bgColor = isBlue ? 'bg-sky-50' : 'bg-rose-50';
                const borderColor = isBlue ? 'border-sky-300' : 'border-rose-300';
                const textColor = isBlue ? 'text-sky-800' : 'text-rose-800';
                const tagColor = isBlue ? 'bg-sky-200 text-sky-800' : 'bg-rose-200 text-rose-800';

                return `
                    <div onclick="window.currentState.selectedProjectId='${project.id}'; window.currentState.view='project-details'; window.renderApp();" 
                         class="transform transition duration-500 hover:scale-[1.02] cursor-pointer rounded-xl overflow-hidden shadow-2xl ${bgColor} border ${borderColor} flex flex-col h-full">
                        <img src="${project.image}" alt="${project.title} Preview" class="w-full h-40 object-cover" onerror="this.onerror=null; this.src='https://placehold.co/400x250/ccc/000?text=Image+Not+Found'">
                        <div class="p-6 flex flex-col justify-between flex-grow">
                            <div>
                                <h3 class="font-bold text-xl mb-2 ${textColor}">${project.title}</h3>
                                <p class="text-gray-600 text-sm line-clamp-3 mb-3">${project.description}</p>
                            </div>
                            <div>
                                <div class="flex flex-wrap gap-2 mb-4">
                                    ${project.tags.map(tag => `<span class="text-xs font-semibold px-3 py-1 rounded-full ${tagColor}">${tag}</span>`).join('')}
                                </div>
                                <a href="${project.demoUrl}" target="_blank" onclick="event.stopPropagation();" 
                                   class="green-button inline-flex items-center justify-center bg-emerald-500 text-white font-semibold py-2 px-4 rounded-lg text-sm hover:bg-emerald-600 w-full transition duration-300">
                                    <svg class="w-4 h-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
                                    View Demo
                                </a>
                            </div>
                        </div>
                    </div>
                `;
            };

            // Main Dashboard HTML structure
            appContainer.innerHTML = `
                <!-- HERO SECTION (Animated Picture & Blue/Pink Background) -->
                <section class="bg-gradient-to-br from-sky-100 to-rose-100 p-8 md:p-16 relative overflow-hidden">
                    <div class="wave-container absolute inset-0 -z-10">
                        <div class="wave transform scale-[1.5]"></div>
                        <div class="wave transform scale-[1.3]"></div>
                    </div>

                    <div class="container mx-auto flex flex-col md:flex-row items-center gap-10 relative z-10">
                        <!-- Hero Text and Call to Action -->
                        <div class="md:w-1/2 text-center md:text-left">
                            <h2 class="text-5xl md:text-6xl font-extrabold text-gray-900 mb-4 leading-tight">
                                Showcase Your <span class="text-emerald-600">Innovation.</span> Get Discovered.
                            </h2>
                            <p class="text-xl text-gray-700 mb-8">
                                The gloEx Hub is where creators share their working demos, connecting ideas with opportunities.
                            </p>
                            
                            <!-- Call to Actions (Green Buttons) -->
                            <div class="flex flex-col sm:flex-row gap-4 justify-center md:justify-start">
                                <button 
                                    onclick="window.currentState.view='upload'; window.renderApp();" 
                                    class="green-button bg-emerald-600 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-emerald-700 focus:ring-4 focus:ring-emerald-300 shadow-xl">
                                    START SHARING (It's Free!)
                                </button>
                                <a href="#projects" class="green-button bg-transparent border-2 border-emerald-600 text-emerald-800 font-bold py-3 px-8 rounded-lg text-lg hover:bg-emerald-600 hover:text-white transition duration-300 shadow-lg">
                                    BROWSE PROJECTS
                                </a>
                            </div>
                        </div>

                        <!-- Animated Picture Placeholder -->
                        <div class="md:w-1/2 h-64 md:h-96 relative flex items-center justify-center">
                            <!-- Placeholder for Animated Picture (Icon/Illustration) -->
                            <div class="text-9xl text-emerald-400 opacity-80 transform transition duration-1000 animate-bounce">
                                <svg class="w-24 h-24 md:w-40 md:h-40 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7.5 3.75C7.5 3.75 6.75 3 6 3c-.75 0-1.5.75-1.5 1.5S4.5 6 5.25 6s1.5-.75 1.5-1.5zm10.5 0c-.75 0-1.5.75-1.5 1.5s.75 1.5 1.5 1.5 1.5-.75 1.5-1.5-.75-1.5-1.5-1.5zM12 10.5v5.25m-2.25-3h4.5M14.25 18c-2.75 0-4.5 1.5-4.5 1.5s-1.75-1.5-4.5-1.5a3 3 0 010-6h9a3 3 0 010 6z"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- LATEST PROJECTS SECTION -->
                <section id="projects" class="container mx-auto px-4 py-12">
                    <div class="flex justify-between items-center mb-8">
                        <h2 class="text-4xl font-extrabold text-gray-900 border-b-4 border-emerald-500 pb-2">
                            Latest Projects (${filteredProjects.length})
                        </h2>
                    </div>

                    ${filteredProjects.length > 0 ? `
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                            ${filteredProjects.map(generateProjectCard).join('')}
                        </div>
                    ` : `
                        <div class="text-center p-10 bg-white rounded-xl shadow-lg border border-gray-200">
                            <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                            <h3 class="mt-2 text-sm font-medium text-gray-900">No projects found</h3>
                            <p class="mt-1 text-sm text-gray-500">
                                Try adjusting your search term or be the first to <a href="#" onclick="window.currentState.view='upload'; window.renderApp();" class="text-emerald-600 font-semibold hover:text-emerald-500">upload a project</a>!
                            </p>
                        </div>
                    `}
                </section>

                <!-- Mid-Page CTA (Green/Dark Theme) -->
                <section class="bg-gray-800 p-12 my-10">
                    <div class="container mx-auto text-center">
                        <h2 class="text-4xl font-extrabold text-white mb-4">
                            Need a Custom Solution?
                        </h2>
                        <p class="text-xl text-emerald-200 mb-8">
                            Our team at ELIJUL GROUPS LTD offers professional web and software development services tailored to your needs.
                        </p>
                        <a href="https://www.gloex.org" target="_blank" class="green-button bg-emerald-500 text-white font-bold py-3 px-8 rounded-full text-lg hover:bg-emerald-600 focus:ring-4 focus:ring-emerald-300 shadow-xl transition duration-300">
                            GET A FREE CONSULTATION
                        </a>
                    </div>
                </section>

                <!-- FEATURES SECTION (Blue/Pink Accent) -->
                <section class="container mx-auto px-4 py-12">
                    <h2 class="text-4xl font-extrabold text-center text-gray-900 border-b-4 border-rose-500 pb-2 mb-12">
                        Why Choose gloEx Hub?
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Feature 1 -->
                        <div class="bg-sky-50 p-6 rounded-xl shadow-lg border-t-4 border-sky-400 transform transition duration-300 hover:shadow-xl">
                            <div class="text-4xl text-sky-600 mb-3">💡</div>
                            <h3 class="text-2xl font-bold text-sky-900 mb-2">Visibility</h3>
                            <p class="text-gray-700">Get your work in front of hundreds of potential collaborators and employers. Maximize your project's reach globally.</p>
                        </div>
                        <!-- Feature 2 -->
                        <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-emerald-400 transform transition duration-300 hover:shadow-xl">
                            <div class="text-4xl text-emerald-600 mb-3">🛠️</div>
                            <h3 class="text-2xl font-bold text-emerald-900 mb-2">Feedback Loop</h3>
                            <p class="text-gray-700">Receive constructive, real-world feedback on your demos to iterate and improve your solutions faster than ever.</p>
                        </div>
                        <!-- Feature 3 -->
                        <div class="bg-rose-50 p-6 rounded-xl shadow-lg border-t-4 border-rose-400 transform transition duration-300 hover:shadow-xl">
                            <div class="text-4xl text-rose-600 mb-3">🤝</div>
                            <h3 class="text-2xl font-bold text-rose-900 mb-2">Networking</h3>
                            <p class="text-gray-700">Connect with ELIJUL GROUPS LTD for potential partnerships, jobs, and professional development opportunities.</p>
                        </div>
                    </div>
                </section>
            `;
        };

        // 2. Project Details View
        const renderProjectDetails = () => {
            const project = window.currentState.projects.find(p => p.id === window.currentState.selectedProjectId);
            
            if (!project) {
                // If project not found, redirect to dashboard
                window.currentState.view = 'dashboard';
                window.renderApp();
                return;
            }

            appContainer.innerHTML = `
                <section class="container mx-auto px-4 py-12">
                    <!-- Back Button (Green Link) -->
                    <a href="#" onclick="window.currentState.view='dashboard'; window.renderApp(); return false;" class="inline-flex items-center text-emerald-700 hover:text-emerald-900 font-semibold mb-6 transition duration-300">
                        <svg class="w-4 h-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                        Back to Dashboard
                    </a>

                    <div class="bg-white p-8 rounded-xl shadow-2xl border-t-4 border-emerald-500">
                        <!-- Project Header -->
                        <h1 class="text-4xl font-extrabold text-gray-900 mb-2">${project.title}</h1>
                        <p class="text-lg text-gray-500 mb-6">By: <span class="font-semibold text-emerald-600">${project.author}</span></p>

                        <!-- Image and Details Grid -->
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <!-- Image/Media -->
                            <div class="lg:col-span-2">
                                <img src="${project.image}" alt="${project.title}" class="w-full h-auto rounded-lg shadow-xl mb-6" onerror="this.onerror=null; this.src='https://placehold.co/800x450/ccc/000?text=Project+Image'">
                                
                                <h3 class="text-2xl font-bold text-gray-800 mb-3 border-b pb-2">Full Description</h3>
                                <p class="text-gray-700 leading-relaxed">
                                    ${project.description} 
                                    <br><br>
                                    This is a placeholder for a more detailed, multi-paragraph description. The project aims to solve complex problems using modern technology stacks and efficient architecture. It represents weeks of dedicated effort and problem-solving. Review the demo link for the live experience.
                                </p>
                            </div>
                            
                            <!-- Sidebar (Metadata & CTAs) -->
                            <div class="lg:col-span-1 bg-gray-50 p-6 rounded-lg shadow-inner">
                                <h3 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">Project Metadata</h3>

                                <div class="space-y-4 mb-6">
                                    <p><span class="font-semibold text-gray-600">Views:</span> ${project.views || 0}</p>
                                    <p><span class="font-semibold text-gray-600">Submission Date:</span> ${new Date().toLocaleDateString()}</p>
                                </div>
                                
                                <h4 class="text-lg font-semibold text-gray-700 mb-3">Technologies Used:</h4>
                                <div class="flex flex-wrap gap-2 mb-8">
                                    ${project.tags.map(tag => `<span class="text-sm font-semibold px-3 py-1 bg-emerald-100 text-emerald-800 rounded-full">${tag}</span>`).join('')}
                                </div>

                                <!-- Action Buttons (Green) -->
                                <div class="space-y-4">
                                    <a href="${project.demoUrl}" target="_blank" class="green-button block w-full text-center bg-emerald-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-emerald-600 focus:ring-4 focus:ring-emerald-300">
                                        <svg class="w-5 h-5 inline mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
                                        Visit Live Demo
                                    </a>
                                    <button onclick="window.currentState.view='upload'; window.renderApp();" class="green-button block w-full text-center bg-gray-200 text-gray-800 font-bold py-3 px-4 rounded-lg hover:bg-gray-300">
                                        Ask Author a Question
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            `;
        };

        // 3. Upload View (Form for submission)
        const renderUpload = () => {
            const handleSubmit = (event) => {
                event.preventDefault();
                const formData = new FormData(event.target);
                const projectData = {
                    title: formData.get('title'),
                    description: formData.get('description'),
                    demoUrl: formData.get('demoUrl'),
                    image: formData.get('imageUrl') || 'https://placehold.co/400x250/ccc/000?text=Pending+Image',
                    tags: formData.get('tags').split(',').map(tag => tag.trim()).filter(tag => tag.length > 0),
                    author: 'Anonymous Contributor' // Will be overwritten by Firebase user data
                };
                
                // Submit to Firebase
                window.submitNewProject(projectData);
            };

            appContainer.innerHTML = `
                <section class="container mx-auto px-4 py-12">
                    <div class="max-w-3xl mx-auto bg-white p-8 rounded-xl shadow-2xl border-t-4 border-rose-500">
                        <h2 class="text-4xl font-extrabold text-gray-900 mb-2 text-center">Submit Your Project Demo</h2>
                        <p class="text-center text-lg text-gray-600 mb-8">Share your work with the community and get feedback.</p>

                        <form id="uploadForm" onsubmit="handleSubmit(event)" class="space-y-6">
                            
                            <!-- Project Title -->
                            <div>
                                <label for="title" class="block text-sm font-medium text-gray-700">Project Title</label>
                                <input type="text" id="title" name="title" required placeholder="e.g., Ultra-Fast Python Backend API"
                                       class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500">
                            </div>

                            <!-- Description -->
                            <div>
                                <label for="description" class="block text-sm font-medium text-gray-700">Detailed Description (Max 300 words)</label>
                                <textarea id="description" name="description" rows="5" required placeholder="Provide a detailed explanation of your project, its technology stack, and features."
                                          class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500"></textarea>
                            </div>

                            <!-- Demo URL -->
                            <div>
                                <label for="demoUrl" class="block text-sm font-medium text-gray-700">Live Demo or Repository URL</label>
                                <input type="url" id="demoUrl" name="demoUrl" required placeholder="https://github.com/your-project"
                                       class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500">
                            </div>

                            <!-- Image URL -->
                            <div>
                                <label for="imageUrl" class="block text-sm font-medium text-gray-700">Project Image URL (Optional)</label>
                                <input type="url" id="imageUrl" name="imageUrl" placeholder="https://i.imgur.com/project-screenshot.png"
                                       class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500">
                            </div>

                             <!-- Tags -->
                            <div>
                                <label for="tags" class="block text-sm font-medium text-gray-700">Tags (Comma separated)</label>
                                <input type="text" id="tags" name="tags" required placeholder="e.g., React, Tailwind, NextJS, Python"
                                       class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500">
                            </div>

                            <!-- Submission Button (Green) -->
                            <button type="submit" 
                                    class="green-button w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-bold text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-4 focus:ring-emerald-300 transition duration-300">
                                <svg class="w-5 h-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg>
                                Submit Project
                            </button>
                        </form>
                    </div>
                </section>
            `;
            // Attach the submit handler after the form is rendered
            document.getElementById('uploadForm').onsubmit = handleSubmit;
        };

        // --- Main Application Renderer ---
        window.renderApp = () => {
            // Show loading spinner if auth is not ready and we are fetching data
            if (!window.currentState.isAuthReady && window.currentState.projects.length === 0) {
                 appContainer.innerHTML = `
                    <div class="flex flex-col items-center justify-center min-h-[50vh] text-emerald-600">
                        <svg class="animate-spin h-10 w-10 text-emerald-500 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <p class="text-lg font-semibold">Loading Application Data...</p>
                    </div>
                 `;
                 return;
            }

            // Route to the correct view
            switch (window.currentState.view) {
                case 'dashboard':
                    renderDashboard();
                    break;
                case 'project-details':
                    renderProjectDetails();
                    break;
                case 'upload':
                    renderUpload();
                    break;
                default:
                    // Default to dashboard if state is invalid
                    window.currentState.view = 'dashboard';
                    renderDashboard();
                    break;
            }
        };

        // Initial render after setup
        window.onload = () => {
             // If firebase init is slow, this ensures the first render happens as soon as the DOM is ready
             // but the content won't be dynamic until isAuthReady is true.
             window.renderApp();
        };
    </script>

</body>
</html>
